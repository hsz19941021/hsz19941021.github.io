---
layout: post
title:  减法、乘法还是除法？伤害公式的选择
date:   2019-03-04
categories: 数值
tag: 设计
---

* content
{:toc}


序章			
====================================
可以说市面上绝大部分游戏的伤害公式都是由减法、乘法或者除法的基础公式框架拓展而来的。那么应该选择哪一种伤害公式，或者说在不同的项目中，哪个伤害公式更为适用。做出公式选择自然不是拍脑袋选的，在此之前我们就应该对这三种公式的优劣势进行分析对比，选出最适合自己项目的那一个公式。  

# 减法公式  
  
>伤害=攻击-防御  
  
减法公式是最好理解的伤害公式。我们假定防御固定为5，那么伤害随攻击变化的曲线如下图所示：  
![1]({{ '/styles/images/2019-03-04/1.png' | prepend: site.baseurl  }})    
通过这个曲线图，我们能从分析出减法公式的优缺点。  
  
减法公式的优点：  
**攻防血的价值前后保持一致**  
除非在极端情况下，攻击每提升一点，伤害值都会稳定提高一点；防御每提升一点，伤害值都会稳定减少一点。两者对于伤害值的影响前后是一致的。
**数值变化相对敏感**  
在没有出现不破防的情况下，你每堆一点攻击力就能多对对方造成一点伤害，每堆一点防御力就能减少对方对你造的伤害。在这种情况下，数值变化是非常明显的，反馈很强烈，在战力相当的情况下，提升少量的攻防属性都可能扭转战局，这对玩家追求属性是有极大的刺激作用。  
  
减法公式的缺点：  
**会有不破防情况出现**  
就像上图所示一样，当攻击小于防御力时，你无法对敌人造成伤害，在不破防的这个阶段内，你提升攻击是得不到任何反馈的。而且会出现“超级玩家”。比如说一个高战力防御齐高的玩家屠杀大量的低战力玩家。当然，如果游戏设计就是一个养超级大R的游戏，这种数值方式也未尝不可，比如现在很多的页游就是采用这种伤害公式。采用减法公式就需要对防御里属性的投放要进行严格把控。  
**防御力在多人对战时价值过高**  
如果是一个玩家同时与多名敌人进行对战的情况，那么每个敌人的攻击力每次攻击只生效一次，而玩家的防御力每次能生效多次。战斗人数越多，防御力的属性价值就越高。这在多人即时PVP的设计中是极大的缺陷。当然，如果是回合制游戏，或者单局战斗人数有限的其他游戏，则可以不考虑此项缺陷。  
  

## 针对减法公式缺陷的一些解决方法  
  
那如果游戏设计时非常重视数值敏感性，非常需要减法公式的优点，就要用减法公式时该如何去尽量从数值层面减少其缺陷带来的负面影响。  
针对不破防的情况，早期的很多游戏都有一个强制设定最低伤害为1。但是即使这样，看着一堆零氪玩家围着一个超R玩家砍出一串串的1数字往上飘也是一件蛋疼事。  
我们可以考虑对公式进行变种，增加一个系数K。  
>伤害=攻击-防御+（攻击xK）  
  
这个攻击x系数K就是一个基础伤害值，比如K=10%，那么你所造成的伤害最低为你的攻击力的10%。相当于一个保底的伤害值。当然如果担心玩家多次攻击不破防敌人测出K值，可以考虑把K值调整为一个随机值，比如5%-10%之间随机。  
  
# 乘法公式  
  
>伤害=攻击x（1-减伤率）  
>减伤率=防御/（防御+常数C）  
  
乘法公式可以说将攻击和防御两个属性相对独立开来，攻击是攻方属性，防御是守方属性，因此可以比较简便的计算角色战斗力。  
我们假设常数C为100，那么减伤率随防御变化如下图所示。  
![2]({{ '/styles/images/2019-03-04/2.png' | prepend: site.baseurl  }})    
可以看出，随着防御的增高是存在边际效益递减的。  
  
乘法公式的优点：  
**不会出现极端的不破防情况，防御值的实际价值相对稳定**  
在乘法公式的作用下，不会出现极端的不破防情况。而且由于免伤率是以百分比的形式呈现，所以即使在多人PVP中，也不会出现类似减法公式的问题。  
  
乘法公式的缺点：  
**数值变化不敏感**  
到后期，玩家会发现提升一点攻防属性对战斗带来的影响远不如前期，对玩家的刺激会越来越小。当然，采用什么样的伤害公式，要看游戏整体是怎样设计的，想要达到怎样的设计目的。比如魔兽世界设计之初就希望玩家之间差距尽可能不要太大，不希望出现“超级玩家”的存在，那么魔兽世界采用乘法公式自然是优于减法公式的。  
**有治疗职业的时候防御属性价值偏高**  
在有治疗职业或者其他回血能力的时候，减伤率一旦达到比较高的时候，就可能会出现伤害量达不到对方回血量的情况，给玩家带来的体验是极差的。  
**防御属性的边际效益递减**  
随着防御属性越来越高，每一点防御属性所能提升的减伤率是越来越低的。  
  
## 针对乘法公式缺陷的一些解决方法  
事实上关于减伤率的处理，有很多游戏是设定了减伤率上限的，但是这种处理又会带来一个问题，减伤率是可以堆满的，也就是防御力时可以堆满的，当玩家发现防御力堆满了之后，就不会再去追求防御力的提升，这对游戏设计者来说自然是不希望出现的，那么我们可以将减伤率公式中的常数C变成一个和等级相关的变量，比如：  
>减伤率=防御/（防御+等级x系数K）  
  
这样可以保证玩家在升级的过程中可以一直追求防御力属性。  
  
# 除法公式  
除法公式是乘法公式的基础上演变来的：  
>伤害 = 攻击 * 攻击/（攻击 + 防御）  
  
我们假定防御固定为5，那么伤害随攻击变化的曲线如下图所示：  
![3]({{ '/styles/images/2019-03-04/3.png' | prepend: site.baseurl  }})    
我们和之前的减法公式放到一起进行对比。  
  
除法公式的优点：  
**不会出现不破防的情况**  
完美继承了乘法公式的优点，在防御高于攻击时，依然能造成伤害。  
**数值投放更容易控制**  
除法公式中引入各种常数用以满足各种需求的难度会比减法公式小的多。数值投放过程中也不容易出现个人战力过高而破坏多人PVP平衡的极端情况。  
  
除法公式的缺点：  
**攻防的价值前后不一致**  
除法公式中攻击的价值是越来越高的，慢慢趋近于和减法公式相同的价值。而防御价值是和乘法公式类似，是越来越低，有边际效益递减的。相比而言，玩家会更倾向于追求攻击属性，这一点对于不同职业特性的设计是不利的。  
  
# 思考  
属性成长可以说是RPG游戏最核心的追求，所以选择一个合适的伤害公式是非常重要的第一步，而后就要衡量各属性之间的价值。建立一套完整而合理的属性价值衡量公式，然后才可以有理有据地分配各属性的投放比例。所以后续的一个很重要的问题就是如何将所有属性通过一个公式系统连接起来。




