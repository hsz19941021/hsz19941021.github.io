---
layout: post
title:  数值设计规范化
date:   2018-11-18
categories: 数值
tag: 设计
---

* content
{:toc}


序章			
====================================
作为数值，建表思路一定要清晰，有逻辑性，精简易用，可扩展。要从全局开始考虑，逐步细化到各个细节。因为excel有个天生的缺陷，就是读取表格都是取表的地址，如果后续有对表格结构进行调整，则会引起很大工作量的改动，所以应该在设计之初就尽可能考虑好后续可能的扩展范围，以及应留的预留位。  
本文便是在梳理自己个人的数值设计一些规范化的逻辑流程。  

# 表格关系结构网  
根据系统层级进行分类，建立一套树状结构表格关系网。  
首层为一张总表，内部为游戏最核心的体验参数。除开最末层的表，中间层级的表都是设计表。  
![树状结构]({{ '/styles/images/2018-11-18/1.png' | prepend: site.baseurl  }})  
>设计表：  
储存基于各个层级的设计数据，每个层级的数据只应该存储在对应的层级，如果同一个层级的不同系统有相关联性，应该用更高一个层级的设计表来规划这两个系统之间的关系和结构。  
  
>数据表：  
给程序进行读取数据使用的表格，也就是和程序之间的数据接口，执行层面的表格。  
  
>数据说明表：  
对数据表的注释说明，规范约定数据表的使用，增强数据表的可读性。  
  
>枚举表：  
定义直观，使用方便，易于维护和扩展的数据表类型，用于存储一些基本的结构分类。  
  
# 设计表  
设计表中应该有明确的分类规划，增加可读性，并且需要明确数据影响范围。设计表主要由三类数据：参数、曲线、矩阵。  
  
>参数：  
决定游戏内某个部分的关键数据，独立不受其他数据影响。  
  
>曲线：  
决定各类数据的趋势数据，其中部分数据应该由参数决定，一般用于各种成长系统。  
  
>矩阵：  
在表中占用一个矩阵范围，可以独立成为一张表的数据区域，比如不同的职业属性表。  
  
计算规则：  
1.用颜色或者其他标识区分`设计数据`和`计算数据`，在调整数据时，应该只修改设计数据。  
2.数据计算中应该充分考虑各种极端情况以及报错情况，做到发现错误，不把错误带入下一层数值计算。  
  
# 数据表  
>表格信息：  
在表格预留表头前空白区域存储表格通用信息：表格名称，表格英文名，表格类型，表格所属系统，表格所属模块。  
  
>唯一识别ID：  
每个字段在所有表里应该拥有唯一识别ID。常用的ID是：表格名_字段名，该ID应该是唯一的并和表格中的每一个字段意义对应上，从而梳理不同数据之间的关联性。对于表格可读性和检查跳转能力有大大的增强。  
  
>主键：  
每张表格应该有唯一主键字段。  
主键ID应该有一套完整的建立在系统结构上的ID规范，也就是要增强可读性，可以快速通过主键ID了解其含义。  
  
>外键：  
表头：系统规范化的表头是为了实现字段可读性，同时提供字段之间的关系。  
字段英文名：程序使用，表内的唯一名称标记。  
字段中文名：一般为字段英文名的注释。  
字段数据类型：程序使用识别字段的数据类型，可以是int，string，float，char等等。
字段类型：描述字段的作用。  
字段外键：使用字段的唯一识别ID，和字段实际结果一致，用以识别原始数据的来源，方便差错和跳转。  
  

# 数据库规范  

 >1. 数据的原子性：  
数据库中的每一列都是不可分割的基本数据项，同一列中不能有多个值，即实体中的某个属性不能有多个值或者不能有重复的属性，如果出现重复的属性则需要重新构建实体，新的实体由重复的属性构成。计算过程数据不需要适用。  
  
 >2. 数据完全依赖于主键：  
要求数据库的每个实例或行必须可以被唯一的区分，即表中要有一列属性可以将实体完全区分，这个属性就是主键，即每一个属性完全依赖于主键。  
  
 >3. 第三范式：  
一个数据库表中不包含已在其它表中已包含的非主关键字信息，属性不依赖与其他非主属性，同一个数据不应该存储于两个位置，其他位置应该用引用调用该数据，也就是避免冗余。  
  
 >4.BCNF 范式：  
>- 所有的非主属性对每一个码都是完全函数依赖 （暗含 主关键字里面可能有多个码可以将实体区分）  
>- 所有的主属性对每一个不包含它的码也是完全函数依赖（即所选码与未选择的码之间也是完全函数依赖的）  
>- 没有任何属性完全函数依赖于非码的任何一组属性（即非主属性之间不能函数依赖）  
  
# 自动纠错  
>- 外键查找提供自动纠错，保证外键内容存在。  
>- 枚举部分的数据使用数据验证，确保数据的合法性。  
>- 公式数据要有报错提示，避免数据错误进入下一层数值计算。  
>- 导出时工具提供不合理数据以及错误格式检测报错提示。  
  
# 可视化  
>对于高层级的设计数据，应该尽可能多的采用图表结合的形式，增加表格的可视化，可以更简洁直观的观察到终端数据的变化。  
  






  
